<html>
    <head>
        <title>Calculadora de Rocio</title>
        <meta charset="UTF-8">
        <script type="text/javascript">
           
           const getInputValue = () =>{
            return Number(document.getElementById("pantalla").value);
           };

           const setInputValue = (valor) =>{
            document.getElementById("pantalla").value= valor;
           
           };

           const vaciarInput = () => {
            document.getElementById("pantalla").value="";
           }

           const validar = () => {
                if(Number.isNaN(getInputValue())) {
                    setInputValue("Error");
                    return false;
                }
                return true;
           }

           const rellenarInfo =() =>{
            const resultadoInput= getInputValue();
            let frase= "";

            if (Number.isNaN(resultadoInput)){
                frase = "Error";
            }
            else{
                if(resultadoInput < 100){
                    frase = "Info: El resultado es menor que 100";
                }
                else if (resultadoInput > 200){
                    frase = "Info: El resultado es superior a 200";
                }
                else{
                    frase ="Info: El resultado está entre 100 y 200";
                }
            }
            document.getElementById("info").innerHTML= frase;

           }
          
           const fact = () =>{
            if(!validar()) return;

                    let inputValue= getInputValue();
                    let res=1;
                    for(let index=inputValue; index>1; index--){
                        res*= index;
                    }
                  setInputValue(res);
                  rellenarInfo();
                };
           
           const sqr = () => {
                if(!validar()) return;

                let inputValue= getInputValue();
                let res= Math.sqrt(inputValue);
                setInputValue(res);
                rellenarInfo();

           }     
           // OPERACIONES BINARIAS
           let acumulador = 0;
           let operador="";

           const acumula = n => {
            switch(operador){
                case "":
                    acumulador= n;
                    break;
                case "+":
                    acumulador += n;
                    break;
                case "-":
                    acumulador -=n;
                    break;
                case "*":
                    acumulador *= n;
                    break;
                case "/":
                    acumulador /= n;
                    break;
                
            }
           }

           const add = () => {
            if(!validar()) return;

            acumula(getInputValue());
            operador = "+";
            vaciarInput();
            rellenarInfo();
           }

           const sub = () => {
            if(!validar()) return;

            acumula(getInputValue());
            operador = "-";
            vaciarInput();
            rellenarInfo();
           }

           const mul = () => {
            if(!validar()) return;

            acumula(getInputValue());
            operador = "*";
            vaciarInput();
            rellenarInfo();
           }

           const div = () => {
            if(!validar()) return;

            acumula(getInputValue());
            operador = "/";
            vaciarInput();
            rellenarInfo();
           }


           const eq = () => {
            if(!validar()) return;

            acumula(getInputValue());
            operador="=";
            vaciarInput();
            setInputValue(acumulador);
            rellenarInfo();
           }
           
           const onload = () => {
                let botonCuadrado= document.getElementById("cuadrado");
                let valorInput= document.getElementById("pantalla");
                
                const sq = () =>{
                    valorInput.value= valorInput.value*valorInput.value;
                };
                //OP UNITARIAS
                botonCuadrado.addEventListener("click",sq);
                document.getElementById("factorial").addEventListener("click",fact);
                document.getElementById("raiz").addEventListener("click", sqr);
                
                //OP BINARIAS
                document.getElementById("suma").addEventListener("click", add);
                document.getElementById("igual").addEventListener("click",eq);
                document.getElementById("resta").addEventListener("click",sub);
                document.getElementById("multiplicacion").addEventListener("click",mul);
                document.getElementById("division").addEventListener("click",div);

                //INPUT
                document.getElementById("pantalla").addEventListener("click",vaciarInput);
                



              
            };
            window.onload= onload;

        </script>
    </head>
    <body >
        <h1 class="cabecera">Calculadora de CORE</h1>
        <div id="input">
            <label for="pantalla">Introducir número:</label>
            <input type="text" id="pantalla">

            <h2 id="info" class ="grande" title ="Info sobre el número">Info sobre el número</h2>


            <div id="Unitarias">
                <button id="cuadrado">x <sup>2</sup></button>
                <button id="factorial">x!</button>
                <button id="raiz">&#8730 x</button>
            </div>
            <div id="Binarias">
                <button id="suma">+</button>
                <button id="resta">-</button>
                <button id="multiplicacion">*</button>
                <button id="division">/</button>
                <button id="igual">=</button>
            </div>
            <div id ="limpieza">
                <button id="clearScreen">C</button>

            </div>
           
        </div>
    </body>
</html>